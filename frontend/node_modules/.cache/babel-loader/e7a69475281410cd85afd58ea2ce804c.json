{"ast":null,"code":"var _jsxFileName = \"/home/xeannort/Documents/Projet/GitHub/groupomania/frontend/src/pages/home/Home.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react/jsx-pascal-case */\nimport React, { useEffect, useState } from \"react\";\nimport EmpptyHome from \"../../comp/home/EmpptyHome\";\nimport ActiveHome from \"../../comp/home/ActiveHome\";\nimport axios from \"axios\";\nimport \"./home.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = props => {\n  _s();\n  //Recuperation props Token Id depuis app\n  const userData = props.userData;\n\n  //State de récupération des post Data\n  const [userPost, setUserPost] = useState([{\n    value: []\n  }]);\n  //State qui définis l'acces a la fonctionnalité de poster des messages ou non  \n  const [access, setAccess] = useState([{\n    value: false\n  }]);\n\n  //State de récupération de toutes la Data contenus dans le profil de l'utilisateur\n\n  const [allDataUser, setAllDataUser] = useState([{\n    value: []\n  }]);\n\n  //récupération de tout les utilisateur\n\n  const [allUsers, setAllUsers] = useState([]);\n  console.log(\"allUsers\");\n  //didMount\n  useEffect(() => {\n    //recupération des post des utilisateurs utilisateur\n    function getRequestHome() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/post/`,\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`\n        }\n      }).then(res => {\n        function getPostData() {\n          const newUserPost = [...userPost];\n          newUserPost[0].value = res.data;\n          setUserPost(newUserPost);\n        }\n        getPostData();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function getUserControlData() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/profil/${userData[1].id}`,\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`\n        }\n      }).then(res => {\n        //FONCTION qui sert à définir l'affichage de la page\n        function accessAuthorize() {\n          const newAccess = [...access];\n          newAccess[0].value = true;\n          setAccess(newAccess);\n        }\n        //la condition d'affichage \n        if (res.data.name === undefined) {\n          console.log(\"Mettre a jour le profil\");\n        } else {\n          accessAuthorize();\n        }\n\n        //function de récupération des données de l'utilisateur  : name/bio/job/img\n\n        function getUserData() {\n          const newAllDataUser = [...allDataUser];\n          newAllDataUser[0].value = res.data;\n          setAllUsers(newAllDataUser);\n        }\n        getUserData();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n\n    //function de récupération de tout les utilisateurs\n    function allDataUsers() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/profil/`,\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`\n        }\n      }).then(res => {\n        function getAllUsers() {\n          const newAllUsers = [...allUsers];\n          newAllUsers[0] = res.data;\n          setAllDataUser(newAllUsers);\n        }\n        getAllUsers();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    getRequestHome();\n    getUserControlData();\n    allDataUsers();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  //JSX\n\n  if (access[0].value === false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(EmpptyHome, {\n        userPost: userPost\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ActiveHome, {\n        userData: userData,\n        access: access,\n        userPost: userPost,\n        allDataUser: allDataUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n};\n_s(Home, \"pkIR2kAPLCrk0WLSRclQvpMb6ks=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","EmpptyHome","ActiveHome","axios","Home","props","userData","userPost","setUserPost","value","access","setAccess","allDataUser","setAllDataUser","allUsers","setAllUsers","console","log","getRequestHome","method","url","process","env","REACT_APP_URL","headers","Authorization","token","then","res","getPostData","newUserPost","data","catch","err","getUserControlData","id","accessAuthorize","newAccess","name","undefined","getUserData","newAllDataUser","allDataUsers","getAllUsers","newAllUsers"],"sources":["/home/xeannort/Documents/Projet/GitHub/groupomania/frontend/src/pages/home/Home.js"],"sourcesContent":["/* eslint-disable react/jsx-pascal-case */\nimport React,{useEffect, useState}from \"react\";\nimport EmpptyHome from \"../../comp/home/EmpptyHome\";\nimport ActiveHome from \"../../comp/home/ActiveHome\";\nimport axios from \"axios\";\nimport \"./home.scss\";\n\nconst Home = (props) => {\n  //Recuperation props Token Id depuis app\n  const userData = props.userData;\n\n  //State de récupération des post Data\n  const [userPost, setUserPost]= useState([\n    {value : []}\n  ])\n   //State qui définis l'acces a la fonctionnalité de poster des messages ou non  \n   const [access, setAccess]= useState([{value:false}])\n\n  //State de récupération de toutes la Data contenus dans le profil de l'utilisateur\n\n  const [allDataUser,setAllDataUser] = useState([{value:[]}])\n\n  //récupération de tout les utilisateur\n\n  const [allUsers, setAllUsers] = useState([])\n  console.log(\"allUsers\");\n   //didMount\n   useEffect(() => {\n    //recupération des post des utilisateurs utilisateur\n    function getRequestHome() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/post/`,\n\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`,\n        },\n      })\n        .then((res) => {\n         function getPostData (){\n          const newUserPost = [...userPost]\n          newUserPost[0].value= res.data\n          setUserPost(\n            newUserPost\n          )\n         }  \n      \n         getPostData()\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\nfunction getUserControlData(){\n  axios({\n      method: \"get\",\n      url: `${process.env.REACT_APP_URL}api/profil/${userData[1].id}`,\n\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`,\n      },\n    })\n      .then((res) => {\n        //FONCTION qui sert à définir l'affichage de la page\n        function accessAuthorize(){\n          const newAccess = [...access]\n          newAccess[0].value = true\n          setAccess(\n            newAccess\n          )\n         }\n         //la condition d'affichage \n      if(res.data.name === undefined){\n        console.log(\"Mettre a jour le profil\");\n      } else{\n         accessAuthorize()\n      }\n\n        //function de récupération des données de l'utilisateur  : name/bio/job/img\n\n        function getUserData (){\n          const newAllDataUser = [...allDataUser]\n          newAllDataUser[0].value = res.data\n          setAllUsers(\n            newAllDataUser\n          )\n        }\n          getUserData()\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n}\n\n//function de récupération de tout les utilisateurs\nfunction allDataUsers(){\n  axios({\n      method: \"get\",\n      url: `${process.env.REACT_APP_URL}api/profil/`,\n\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`,\n      },\n    })\n      .then((res) => {\n        function getAllUsers (){\n          const newAllUsers = [...allUsers]\n          newAllUsers[0] = res.data\n          setAllDataUser(\n            newAllUsers\n          )\n        }\n        getAllUsers()\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n}\n  \n    getRequestHome();\n    getUserControlData()\n    allDataUsers()\n   \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  //JSX\n\n  if(access[0].value === false){\n    return (\n      <div>   \n      <EmpptyHome userPost={userPost} />\n      </div>\n   \n    )\n  } else {\n    return(\n      <div>\n        <ActiveHome userData={userData} access={access} userPost={userPost} allDataUser={allDataUser}/></div>\n    )\n  }\n\n};\n\nexport default Home;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAEC,SAAS,EAAEC,QAAQ,QAAM,OAAO;AAC9C,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,aAAa;AAAC;AAErB,MAAMC,IAAI,GAAIC,KAAK,IAAK;EAAA;EACtB;EACA,MAAMC,QAAQ,GAAGD,KAAK,CAACC,QAAQ;;EAE/B;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAER,QAAQ,CAAC,CACtC;IAACS,KAAK,EAAG;EAAE,CAAC,CACb,CAAC;EACD;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAEX,QAAQ,CAAC,CAAC;IAACS,KAAK,EAAC;EAAK,CAAC,CAAC,CAAC;;EAErD;;EAEA,MAAM,CAACG,WAAW,EAACC,cAAc,CAAC,GAAGb,QAAQ,CAAC,CAAC;IAACS,KAAK,EAAC;EAAE,CAAC,CAAC,CAAC;;EAE3D;;EAEA,MAAM,CAACK,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC5CgB,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;EACtB;EACAlB,SAAS,CAAC,MAAM;IACf;IACA,SAASmB,cAAc,GAAG;MACxBf,KAAK,CAAC;QACJgB,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,WAAU;QAE5CC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASnB,QAAQ,CAAC,CAAC,CAAC,CAACoB,KAAM;QAC7C;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;QACd,SAASC,WAAW,GAAG;UACtB,MAAMC,WAAW,GAAG,CAAC,GAAGvB,QAAQ,CAAC;UACjCuB,WAAW,CAAC,CAAC,CAAC,CAACrB,KAAK,GAAEmB,GAAG,CAACG,IAAI;UAC9BvB,WAAW,CACTsB,WAAW,CACZ;QACF;QAEAD,WAAW,EAAE;MACd,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,IAAK;QACdjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAClB,CAAC,CAAC;IACN;IACJ,SAASC,kBAAkB,GAAE;MAC3B/B,KAAK,CAAC;QACFgB,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,cAAajB,QAAQ,CAAC,CAAC,CAAC,CAAC6B,EAAG,EAAC;QAE/DX,OAAO,EAAE;UACPC,aAAa,EAAG,UAASnB,QAAQ,CAAC,CAAC,CAAC,CAACoB,KAAM;QAC7C;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;QACb;QACA,SAASQ,eAAe,GAAE;UACxB,MAAMC,SAAS,GAAG,CAAC,GAAG3B,MAAM,CAAC;UAC7B2B,SAAS,CAAC,CAAC,CAAC,CAAC5B,KAAK,GAAG,IAAI;UACzBE,SAAS,CACP0B,SAAS,CACV;QACF;QACA;QACH,IAAGT,GAAG,CAACG,IAAI,CAACO,IAAI,KAAKC,SAAS,EAAC;UAC7BvB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;QACxC,CAAC,MAAK;UACHmB,eAAe,EAAE;QACpB;;QAEE;;QAEA,SAASI,WAAW,GAAG;UACrB,MAAMC,cAAc,GAAG,CAAC,GAAG7B,WAAW,CAAC;UACvC6B,cAAc,CAAC,CAAC,CAAC,CAAChC,KAAK,GAAGmB,GAAG,CAACG,IAAI;UAClChB,WAAW,CACT0B,cAAc,CACf;QACH;QACED,WAAW,EAAE;MACjB,CAAC,CAAC,CACDR,KAAK,CAAEC,GAAG,IAAK;QACdjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAClB,CAAC,CAAC;IACR;;IAEA;IACA,SAASS,YAAY,GAAE;MACrBvC,KAAK,CAAC;QACFgB,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,aAAY;QAE9CC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASnB,QAAQ,CAAC,CAAC,CAAC,CAACoB,KAAM;QAC7C;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;QACb,SAASe,WAAW,GAAG;UACrB,MAAMC,WAAW,GAAG,CAAC,GAAG9B,QAAQ,CAAC;UACjC8B,WAAW,CAAC,CAAC,CAAC,GAAGhB,GAAG,CAACG,IAAI;UACzBlB,cAAc,CACZ+B,WAAW,CACZ;QACH;QACAD,WAAW,EAAE;MACf,CAAC,CAAC,CACDX,KAAK,CAAEC,GAAG,IAAK;QACdjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAClB,CAAC,CAAC;IACR;IAEIf,cAAc,EAAE;IAChBgB,kBAAkB,EAAE;IACpBQ,YAAY,EAAE;;IAEhB;EACA,CAAC,EAAE,EAAE,CAAC;;EAEN;;EAEA,IAAGhC,MAAM,CAAC,CAAC,CAAC,CAACD,KAAK,KAAK,KAAK,EAAC;IAC3B,oBACE;MAAA,uBACA,QAAC,UAAU;QAAC,QAAQ,EAAEF;MAAS;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA,QAC5B;EAGV,CAAC,MAAM;IACL,oBACE;MAAA,uBACE,QAAC,UAAU;QAAC,QAAQ,EAAED,QAAS;QAAC,MAAM,EAAEI,MAAO;QAAC,QAAQ,EAAEH,QAAS;QAAC,WAAW,EAAEK;MAAY;QAAA;QAAA;QAAA;MAAA;IAAE;MAAA;MAAA;MAAA;IAAA,QAAM;EAE3G;AAEF,CAAC;AAAC,GAvIIR,IAAI;AAAA,KAAJA,IAAI;AAyIV,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module"}