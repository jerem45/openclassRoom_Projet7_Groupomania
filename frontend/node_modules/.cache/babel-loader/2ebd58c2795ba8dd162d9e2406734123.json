{"ast":null,"code":"var _jsxFileName = \"/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/log_reg/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Form from \"./Form\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = props => {\n  _s();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [axiosData, setAxiosData] = useState(props.userData);\n  //Récuperation props Token Id depuis app\n  const setUserData = props.setUserData;\n  const url = `${process.env.REACT_APP_URL}api/auth/${props.regiLog}`;\n  const navigate = useNavigate();\n  const handleLogin = e => {\n    e.preventDefault();\n    axios({\n      method: \"post\",\n      url: url,\n      data: {\n        email,\n        password\n      }\n    }).then(res => {\n      function redirectUrl() {\n        function getDataUser() {\n          const Token = res.data.token;\n          const ID = res.data.userId;\n          const newAxiosData = [...axiosData];\n          newAxiosData[0].token = Token;\n          newAxiosData[1].id = ID;\n          setAxiosData(newAxiosData);\n        }\n        navigate(\"home/\");\n        alert(\"Félicitation pour votre Inscription, Merci de vous connecter a présent\");\n        window.location.reload();\n      }\n      redirectUrl();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const handleChange_email = event => {\n    setEmail(event.target.value);\n  };\n  const handleChange_password = event => {\n    setPassword(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: e => handleLogin(e),\n    onChange_email: handleChange_email,\n    onChange_password: handleChange_password,\n    valueEmail: email,\n    valuePassword: password,\n    valueBtn: props.valueBtn,\n    valueTitle: props.valueTitle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Register, \"v7fFJ+PQ7pas8SZOR/vBqvS6gNY=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","Form","useNavigate","axios","Register","props","email","setEmail","password","setPassword","axiosData","setAxiosData","userData","setUserData","url","process","env","REACT_APP_URL","regiLog","navigate","handleLogin","e","preventDefault","method","data","then","res","redirectUrl","getDataUser","Token","token","ID","userId","newAxiosData","id","alert","window","location","reload","catch","err","console","log","handleChange_email","event","target","value","handleChange_password","valueBtn","valueTitle"],"sources":["/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/log_reg/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"./Form\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst Register = (props) => {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [axiosData, setAxiosData] = useState(props.userData);\n  //Récuperation props Token Id depuis app\n  const setUserData = props.setUserData;\n  const url = `${process.env.REACT_APP_URL}api/auth/${props.regiLog}`;\n  const navigate = useNavigate();\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    axios({\n      method: \"post\",\n      url: url,\n      data: {\n        email,\n        password,\n      },\n    })\n      .then((res) => {\n        function redirectUrl() {\n          function getDataUser() {\n            const Token = res.data.token;\n            const ID = res.data.userId;\n            const newAxiosData = [...axiosData];\n  \n            newAxiosData[0].token = Token;\n            newAxiosData[1].id = ID;\n            setAxiosData(newAxiosData);\n          }\n          navigate(\"home/\");\n          alert(\n            \"Félicitation pour votre Inscription, Merci de vous connecter a présent\"\n          );\n          window.location.reload();\n        }\n        redirectUrl();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleChange_email = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const handleChange_password = (event) => {\n    setPassword(event.target.value);\n  };\n  return (\n    <Form\n      onSubmit={(e) => handleLogin(e)}\n      onChange_email={handleChange_email}\n      onChange_password={handleChange_password}\n      valueEmail={email}\n      valuePassword={password}\n      valueBtn={props.valueBtn}\n      valueTitle={props.valueTitle}\n    />\n  );\n};\n\nexport default Register;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,IAAI,MAAM,QAAQ;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAAC;AAE1B,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EAAA;EAC1B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGR,KAAK,CAACC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGV,KAAK,CAACC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAACK,KAAK,CAACO,QAAQ,CAAC;EAC1D;EACA,MAAMC,WAAW,GAAGR,KAAK,CAACQ,WAAW;EACrC,MAAMC,GAAG,GAAI,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,YAAWZ,KAAK,CAACa,OAAQ,EAAC;EACnE,MAAMC,QAAQ,GAAGjB,WAAW,EAAE;EAC9B,MAAMkB,WAAW,GAAIC,CAAC,IAAK;IACzBA,CAAC,CAACC,cAAc,EAAE;IAElBnB,KAAK,CAAC;MACJoB,MAAM,EAAE,MAAM;MACdT,GAAG,EAAEA,GAAG;MACRU,IAAI,EAAE;QACJlB,KAAK;QACLE;MACF;IACF,CAAC,CAAC,CACCiB,IAAI,CAAEC,GAAG,IAAK;MACb,SAASC,WAAW,GAAG;QACrB,SAASC,WAAW,GAAG;UACrB,MAAMC,KAAK,GAAGH,GAAG,CAACF,IAAI,CAACM,KAAK;UAC5B,MAAMC,EAAE,GAAGL,GAAG,CAACF,IAAI,CAACQ,MAAM;UAC1B,MAAMC,YAAY,GAAG,CAAC,GAAGvB,SAAS,CAAC;UAEnCuB,YAAY,CAAC,CAAC,CAAC,CAACH,KAAK,GAAGD,KAAK;UAC7BI,YAAY,CAAC,CAAC,CAAC,CAACC,EAAE,GAAGH,EAAE;UACvBpB,YAAY,CAACsB,YAAY,CAAC;QAC5B;QACAd,QAAQ,CAAC,OAAO,CAAC;QACjBgB,KAAK,CACH,wEAAwE,CACzE;QACDC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;MAC1B;MACAX,WAAW,EAAE;IACf,CAAC,CAAC,CACDY,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC;EAED,MAAMG,kBAAkB,GAAIC,KAAK,IAAK;IACpCrC,QAAQ,CAACqC,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EAC9B,CAAC;EAED,MAAMC,qBAAqB,GAAIH,KAAK,IAAK;IACvCnC,WAAW,CAACmC,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EACjC,CAAC;EACD,oBACE,QAAC,IAAI;IACH,QAAQ,EAAGzB,CAAC,IAAKD,WAAW,CAACC,CAAC,CAAE;IAChC,cAAc,EAAEsB,kBAAmB;IACnC,iBAAiB,EAAEI,qBAAsB;IACzC,UAAU,EAAEzC,KAAM;IAClB,aAAa,EAAEE,QAAS;IACxB,QAAQ,EAAEH,KAAK,CAAC2C,QAAS;IACzB,UAAU,EAAE3C,KAAK,CAAC4C;EAAW;IAAA;IAAA;IAAA;EAAA,QAC7B;AAEN,CAAC;AAAC,GA7DI7C,QAAQ;EAAA,QAOKF,WAAW;AAAA;AAAA,KAPxBE,QAAQ;AA+Dd,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module"}