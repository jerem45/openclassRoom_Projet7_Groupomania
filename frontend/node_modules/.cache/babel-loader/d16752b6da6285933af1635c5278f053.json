{"ast":null,"code":"var _jsxFileName = \"/home/xeannort/Documents/Projet/GitHub/groupomania/frontend/src/comp/home/User_post.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react/jsx-pascal-case */\nimport React, { useState } from \"react\";\nimport Button from \"../UI/button/Button\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst User_post = props => {\n  _s();\n  const navigate = useNavigate();\n  //recupération du state\n  const allDataUser = props.allDataUser;\n  const userData = props.userData;\n  console.log(userData);\n  //déclaration de state pour le post\n  const [postUser, setPostUser] = useState(\"\");\n\n  //fonction de récupération de la valeur de l'input\n  function handlePostUser(e) {\n    setPostUser(e.target.value);\n  }\n  console.log(postUser);\n\n  //AXIOS pour envois du post vers la base de données\n  function getUserControlData() {\n    axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/`,\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`\n      },\n      data: {\n        post: postUser,\n        userId: userData[0]\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        navigate(\"/home/\");\n      } else {\n        console.log(\"erreur lors de l'envoi du formulaire redirection impossible\");\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n  //JSX\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user__post\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Je m'exprime...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"user__container--post\",\n      action: \"\",\n      onSubmit: getUserControlData,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"post\",\n        id: \"post\",\n        placeholder: \"Je poste mon message...\",\n        required: true,\n        minLength: \"5\",\n        maxLength: \"150\",\n        size: \"10\",\n        onChange: e => handlePostUser(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"btn small\",\n        value: \"POSTER\",\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(User_post, \"YRuxpm0AafgSN0G5822mMTDNorA=\", false, function () {\n  return [useNavigate];\n});\n_c = User_post;\nexport default User_post;\nvar _c;\n$RefreshReg$(_c, \"User_post\");","map":{"version":3,"names":["React","useState","Button","axios","useNavigate","User_post","props","navigate","allDataUser","userData","console","log","postUser","setPostUser","handlePostUser","e","target","value","getUserControlData","method","url","process","env","REACT_APP_URL","headers","Authorization","token","data","post","userId","then","res","status","catch","err"],"sources":["/home/xeannort/Documents/Projet/GitHub/groupomania/frontend/src/comp/home/User_post.js"],"sourcesContent":["/* eslint-disable react/jsx-pascal-case */\nimport React,{useState} from \"react\";\nimport Button from \"../UI/button/Button\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nconst User_post = (props) => {\nconst navigate = useNavigate();\n  //recupération du state\n  const allDataUser = props.allDataUser\n  const userData= props.userData\n  console.log(userData);\n  //déclaration de state pour le post\n  const [postUser,setPostUser] = useState(\"\")\n\n  //fonction de récupération de la valeur de l'input\nfunction handlePostUser(e){\nsetPostUser(\n  e.target.value\n)\n}\nconsole.log(postUser);\n\n//AXIOS pour envois du post vers la base de données\nfunction getUserControlData(){\n  axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/`,\n\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`,\n      },\n      data: {\n       post : postUser,\n       userId: userData[0]\n      },\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          navigate(\"/home/\");\n        } else {\n          console.log(\n            \"erreur lors de l'envoi du formulaire redirection impossible\"\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n}\n//JSX\n  return (\n    <div className=\"user__post\">\n      <h2>Je m'exprime...</h2>\n      <form \n      className=\"user__container--post\"\n      action=\"\"\n      onSubmit={getUserControlData}\n      >\n        <input\n          type=\"text\"\n          name=\"post\"\n          id=\"post\"\n          placeholder=\"Je poste mon message...\"\n          required\n          minLength=\"5\"\n          maxLength=\"150\"\n          size=\"10\"\n          onChange={((e)=>handlePostUser(e))}\n        />\n        <Button \n        className=\"btn small\" \n        value=\"POSTER\" \n        type=\"submit\" \n        />\n      </form>\n    </div>\n  );\n};\n\nexport default User_post;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAEC,QAAQ,QAAO,OAAO;AACpC,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAG/C,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAAA;EAC7B,MAAMC,QAAQ,GAAGH,WAAW,EAAE;EAC5B;EACA,MAAMI,WAAW,GAAGF,KAAK,CAACE,WAAW;EACrC,MAAMC,QAAQ,GAAEH,KAAK,CAACG,QAAQ;EAC9BC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;EACrB;EACA,MAAM,CAACG,QAAQ,EAACC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;;EAE3C;EACF,SAASa,cAAc,CAACC,CAAC,EAAC;IAC1BF,WAAW,CACTE,CAAC,CAACC,MAAM,CAACC,KAAK,CACf;EACD;EACAP,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;;EAErB;EACA,SAASM,kBAAkB,GAAE;IAC3Bf,KAAK,CAAC;MACFgB,MAAM,EAAE,MAAM;MACdC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,WAAU;MAE5CC,OAAO,EAAE;QACPC,aAAa,EAAG,UAAShB,QAAQ,CAAC,CAAC,CAAC,CAACiB,KAAM;MAC7C,CAAC;MACDC,IAAI,EAAE;QACLC,IAAI,EAAGhB,QAAQ;QACfiB,MAAM,EAAEpB,QAAQ,CAAC,CAAC;MACnB;IACF,CAAC,CAAC,CACCqB,IAAI,CAAEC,GAAG,IAAK;MACb,IAAIA,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;QACtBzB,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,MAAM;QACLG,OAAO,CAACC,GAAG,CACT,6DAA6D,CAC9D;MACH;IACF,CAAC,CAAC,CACDsB,KAAK,CAAEC,GAAG,IAAK;MACdxB,OAAO,CAACC,GAAG,CAACuB,GAAG,CAAC;IAClB,CAAC,CAAC;EACR;EACA;EACE,oBACE;IAAK,SAAS,EAAC,YAAY;IAAA,wBACzB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAwB,eACxB;MACA,SAAS,EAAC,uBAAuB;MACjC,MAAM,EAAC,EAAE;MACT,QAAQ,EAAEhB,kBAAmB;MAAA,wBAE3B;QACE,IAAI,EAAC,MAAM;QACX,IAAI,EAAC,MAAM;QACX,EAAE,EAAC,MAAM;QACT,WAAW,EAAC,yBAAyB;QACrC,QAAQ;QACR,SAAS,EAAC,GAAG;QACb,SAAS,EAAC,KAAK;QACf,IAAI,EAAC,IAAI;QACT,QAAQ,EAAIH,CAAC,IAAGD,cAAc,CAACC,CAAC;MAAG;QAAA;QAAA;QAAA;MAAA,QACnC,eACF,QAAC,MAAM;QACP,SAAS,EAAC,WAAW;QACrB,KAAK,EAAC,QAAQ;QACd,IAAI,EAAC;MAAQ;QAAA;QAAA;QAAA;MAAA,QACX;IAAA;MAAA;MAAA;MAAA;IAAA,QACG;EAAA;IAAA;IAAA;IAAA;EAAA,QACH;AAEV,CAAC;AAAC,GAxEIV,SAAS;EAAA,QACED,WAAW;AAAA;AAAA,KADtBC,SAAS;AA0Ef,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module"}