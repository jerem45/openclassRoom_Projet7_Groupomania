{"ast":null,"code":"var _jsxFileName = \"/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/log_reg/Login.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react/jsx-pascal-case */\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Form from \"./Form\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  // Les states\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [axiosData, setAxiosData] = useState(props.userData);\n\n  //Récuperation props Token Id depuis app\n  const setUserData = props.setUserData;\n\n  //Récuperation des props utilitaires\n  const url = `${process.env.REACT_APP_URL}api/auth/${props.regiLog}`;\n  const navigate = useNavigate();\n  const propsBtn = props.button;\n  const propsTitle = props.title;\n\n  //Requêtes axios envoyer de la data\n  const handleLogin = e => {\n    e.preventDefault();\n    axios({\n      method: \"post\",\n      url: url,\n      data: {\n        email,\n        password\n      }\n    }).then(res => {\n      function getDataUser() {\n        const Token = res.data.token;\n        const ID = res.data.userId;\n        const newAxiosData = [...axiosData];\n        newAxiosData[0].token = Token;\n        newAxiosData[1].id = ID;\n        setAxiosData(newAxiosData);\n      }\n      function redirectUrl() {\n        navigate(\"home/\");\n      }\n      getDataUser();\n      redirectUrl();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const handleChange_email = event => {\n    setEmail(event.target.value);\n  };\n  const handleChange_password = event => {\n    setPassword(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: e => handleLogin(e),\n    onChange_email: handleChange_email,\n    onChange_password: handleChange_password,\n    valueEmail: email,\n    valuePassword: password,\n    valueBtn: propsBtn,\n    valueTitle: propsTitle,\n    setUserData: setUserData,\n    axiosData: axiosData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"v7fFJ+PQ7pas8SZOR/vBqvS6gNY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","Form","axios","Login","props","email","setEmail","password","setPassword","axiosData","setAxiosData","userData","setUserData","url","process","env","REACT_APP_URL","regiLog","navigate","propsBtn","button","propsTitle","title","handleLogin","e","preventDefault","method","data","then","res","getDataUser","Token","token","ID","userId","newAxiosData","id","redirectUrl","catch","err","console","log","handleChange_email","event","target","value","handleChange_password"],"sources":["/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/log_reg/Login.js"],"sourcesContent":["/* eslint-disable react/jsx-pascal-case */\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Form from \"./Form\";\nimport axios from \"axios\";\n\nconst Login = (props) => {\n  // Les states\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [axiosData, setAxiosData] = useState(props.userData);\n\n\n  //Récuperation props Token Id depuis app\n  const setUserData = props.setUserData;\n\n  //Récuperation des props utilitaires\n  const url = `${process.env.REACT_APP_URL}api/auth/${props.regiLog}`;\n  const navigate = useNavigate();\n  const propsBtn = props.button;\n  const propsTitle = props.title;\n\n  //Requêtes axios envoyer de la data\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    axios({\n      method: \"post\",\n      url: url,\n      data: {\n        email,\n        password,\n      },\n    })\n      .then((res) => {\n        function getDataUser() {\n          const Token = res.data.token;\n          const ID = res.data.userId;\n          const newAxiosData = [...axiosData];\n\n          newAxiosData[0].token = Token;\n          newAxiosData[1].id = ID;\n          setAxiosData(newAxiosData);\n        }\n\n        function redirectUrl() {\n          navigate(\"home/\");\n        }\n        getDataUser();\n        redirectUrl();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleChange_email = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const handleChange_password = (event) => {\n    setPassword(event.target.value);\n  };\n\n  return (\n    <Form\n      onSubmit={(e) => handleLogin(e)}\n      onChange_email={handleChange_email}\n      onChange_password={handleChange_password}\n      valueEmail={email}\n      valuePassword={password}\n      valueBtn={propsBtn}\n      valueTitle={propsTitle}\n      setUserData={setUserData}\n      axiosData={axiosData}\n    />\n  );\n};\n\nexport default Login;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,KAAK,MAAM,OAAO;AAAC;AAE1B,MAAMC,KAAK,GAAIC,KAAK,IAAK;EAAA;EACvB;EACA,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAACK,KAAK,CAACO,QAAQ,CAAC;;EAG1D;EACA,MAAMC,WAAW,GAAGR,KAAK,CAACQ,WAAW;;EAErC;EACA,MAAMC,GAAG,GAAI,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,YAAWZ,KAAK,CAACa,OAAQ,EAAC;EACnE,MAAMC,QAAQ,GAAGlB,WAAW,EAAE;EAC9B,MAAMmB,QAAQ,GAAGf,KAAK,CAACgB,MAAM;EAC7B,MAAMC,UAAU,GAAGjB,KAAK,CAACkB,KAAK;;EAE9B;EACA,MAAMC,WAAW,GAAIC,CAAC,IAAK;IACzBA,CAAC,CAACC,cAAc,EAAE;IAElBvB,KAAK,CAAC;MACJwB,MAAM,EAAE,MAAM;MACdb,GAAG,EAAEA,GAAG;MACRc,IAAI,EAAE;QACJtB,KAAK;QACLE;MACF;IACF,CAAC,CAAC,CACCqB,IAAI,CAAEC,GAAG,IAAK;MACb,SAASC,WAAW,GAAG;QACrB,MAAMC,KAAK,GAAGF,GAAG,CAACF,IAAI,CAACK,KAAK;QAC5B,MAAMC,EAAE,GAAGJ,GAAG,CAACF,IAAI,CAACO,MAAM;QAC1B,MAAMC,YAAY,GAAG,CAAC,GAAG1B,SAAS,CAAC;QAEnC0B,YAAY,CAAC,CAAC,CAAC,CAACH,KAAK,GAAGD,KAAK;QAC7BI,YAAY,CAAC,CAAC,CAAC,CAACC,EAAE,GAAGH,EAAE;QACvBvB,YAAY,CAACyB,YAAY,CAAC;MAC5B;MAEA,SAASE,WAAW,GAAG;QACrBnB,QAAQ,CAAC,OAAO,CAAC;MACnB;MACAY,WAAW,EAAE;MACbO,WAAW,EAAE;IACf,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC;EAED,MAAMG,kBAAkB,GAAIC,KAAK,IAAK;IACpCrC,QAAQ,CAACqC,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EAC9B,CAAC;EAED,MAAMC,qBAAqB,GAAIH,KAAK,IAAK;IACvCnC,WAAW,CAACmC,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EACjC,CAAC;EAED,oBACE,QAAC,IAAI;IACH,QAAQ,EAAGrB,CAAC,IAAKD,WAAW,CAACC,CAAC,CAAE;IAChC,cAAc,EAAEkB,kBAAmB;IACnC,iBAAiB,EAAEI,qBAAsB;IACzC,UAAU,EAAEzC,KAAM;IAClB,aAAa,EAAEE,QAAS;IACxB,QAAQ,EAAEY,QAAS;IACnB,UAAU,EAAEE,UAAW;IACvB,WAAW,EAAET,WAAY;IACzB,SAAS,EAAEH;EAAU;IAAA;IAAA;IAAA;EAAA,QACrB;AAEN,CAAC;AAAC,GAvEIN,KAAK;EAAA,QAYQH,WAAW;AAAA;AAAA,KAZxBG,KAAK;AAyEX,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}