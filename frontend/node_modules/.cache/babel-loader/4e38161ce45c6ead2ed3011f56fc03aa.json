{"ast":null,"code":"var _s = $RefreshSig$();\n/* eslint-disable react/jsx-pascal-case */\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./home.scss\";\nconst Home = props => {\n  _s();\n  //Recuperation props Token Id depuis app\n  const userData = props.userData;\n  console.log(\"userData depuis Home\");\n  console.log(userData);\n\n  //State de récupération des post Data\n\n  const [userPost, setUserPost] = useState([{\n    value: []\n  }]);\n  const [access, setAccess] = [{\n    value: false\n  }];\n  console.log(userPost);\n\n  // // recupération des states validation de formulaire de app sous forme de props\n  //  const validateProfil=props.validateProfil      \n  //  console.log(\"validateProfil depuis  Home\");\n  //  console.log(validateProfil);\n\n  //didMount\n  useEffect(() => {\n    //recupération des post des utilisateurs utilisateur\n    function getRequestHome() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/post/`,\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`\n        }\n      }).then(res => {\n        function getPostData() {\n          const newUserPost = [...userPost];\n          newUserPost[0].value = res.data;\n          setUserPost(newUserPost);\n        }\n        getPostData();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    axios({\n      method: \"get\",\n      url: `${process.env.REACT_APP_URL}api/profil/${userData[1].id}`,\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`\n      }\n    }).then(res => {\n      function accessAuthorize() {\n        const newAccess = [...access];\n        newAccess[0].value = true;\n        setAccess(newAccess);\n      }\n      console.log(\"res de la data de l'utilisateur\");\n      console.log(res);\n      if (res.data === \"\") {\n        console.log(\"Mettre a jour le profil pour avoir l'accé\");\n      } else {\n        accessAuthorize();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    getRequestHome();\n  }, []);\n};\n_s(Home, \"8hLJwV9nS37qhFLV3GxlQnH/JEk=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","axios","Home","props","userData","console","log","userPost","setUserPost","value","access","setAccess","getRequestHome","method","url","process","env","REACT_APP_URL","headers","Authorization","token","then","res","getPostData","newUserPost","data","catch","err","id","accessAuthorize","newAccess"],"sources":["/home/xeannort/Documents/Projet/GitHub/groupomania/frontend/src/pages/home/Home.js"],"sourcesContent":["/* eslint-disable react/jsx-pascal-case */\nimport React,{useEffect, useState}from \"react\";\nimport axios from \"axios\";\nimport \"./home.scss\";\n\nconst Home = (props) => {\n  //Recuperation props Token Id depuis app\n  const userData = props.userData;\n  console.log(\"userData depuis Home\");\n  console.log(userData);\n\n  //State de récupération des post Data\n\n  const [userPost, setUserPost]= useState([\n    {value : []}\n  ])\n   const [access, setAccess]=[{value:false}]\n\nconsole.log(userPost);\n\n  // // recupération des states validation de formulaire de app sous forme de props\n  //  const validateProfil=props.validateProfil      \n  //  console.log(\"validateProfil depuis  Home\");\n  //  console.log(validateProfil);\n\n   //didMount\n   useEffect(() => {\n    //recupération des post des utilisateurs utilisateur\n    function getRequestHome() {\n      axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_URL}api/post/`,\n\n        headers: {\n          Authorization: `Bearer ${userData[0].token}`,\n        },\n      })\n        .then((res) => {\n         function getPostData (){\n          const newUserPost = [...userPost]\n          newUserPost[0].value= res.data\n          setUserPost(\n            newUserPost\n          )\n         }  \n      \n         getPostData()\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n    axios({\n      method: \"get\",\n      url: `${process.env.REACT_APP_URL}api/profil/${userData[1].id}`,\n\n      headers: {\n        Authorization: `Bearer ${userData[0].token}`,\n      },\n    })\n      .then((res) => {\n        function accessAuthorize(){\n          const newAccess = [...access]\n          newAccess[0].value = true\n          setAccess(\n            newAccess\n          )\n         } \n         console.log(\"res de la data de l'utilisateur\");\n      console.log(res);\n      if(res.data === \"\"){\n        console.log(\"Mettre a jour le profil pour avoir l'accé\");\n      } else{\n         accessAuthorize()\n      }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  \n    getRequestHome();\n   \n  }, []);\n\n\n};\n\nexport default Home;\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,IAAEC,SAAS,EAAEC,QAAQ,QAAM,OAAO;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,aAAa;AAEpB,MAAMC,IAAI,GAAIC,KAAK,IAAK;EAAA;EACtB;EACA,MAAMC,QAAQ,GAAGD,KAAK,CAACC,QAAQ;EAC/BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACnCD,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;;EAErB;;EAEA,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAER,QAAQ,CAAC,CACtC;IAACS,KAAK,EAAG;EAAE,CAAC,CACb,CAAC;EACD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAC,CAAC;IAACF,KAAK,EAAC;EAAK,CAAC,CAAC;EAE5CJ,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;;EAEnB;EACA;EACA;EACA;;EAEC;EACAR,SAAS,CAAC,MAAM;IACf;IACA,SAASa,cAAc,GAAG;MACxBX,KAAK,CAAC;QACJY,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,WAAU;QAE5CC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASf,QAAQ,CAAC,CAAC,CAAC,CAACgB,KAAM;QAC7C;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;QACd,SAASC,WAAW,GAAG;UACtB,MAAMC,WAAW,GAAG,CAAC,GAAGjB,QAAQ,CAAC;UACjCiB,WAAW,CAAC,CAAC,CAAC,CAACf,KAAK,GAAEa,GAAG,CAACG,IAAI;UAC9BjB,WAAW,CACTgB,WAAW,CACZ;QACF;QAEAD,WAAW,EAAE;MACd,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,IAAK;QACdtB,OAAO,CAACC,GAAG,CAACqB,GAAG,CAAC;MAClB,CAAC,CAAC;IACN;IAEA1B,KAAK,CAAC;MACJY,MAAM,EAAE,KAAK;MACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,aAAc,cAAab,QAAQ,CAAC,CAAC,CAAC,CAACwB,EAAG,EAAC;MAE/DV,OAAO,EAAE;QACPC,aAAa,EAAG,UAASf,QAAQ,CAAC,CAAC,CAAC,CAACgB,KAAM;MAC7C;IACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;MACb,SAASO,eAAe,GAAE;QACxB,MAAMC,SAAS,GAAG,CAAC,GAAGpB,MAAM,CAAC;QAC7BoB,SAAS,CAAC,CAAC,CAAC,CAACrB,KAAK,GAAG,IAAI;QACzBE,SAAS,CACPmB,SAAS,CACV;MACF;MACAzB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MACjDD,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAChB,IAAGA,GAAG,CAACG,IAAI,KAAK,EAAE,EAAC;QACjBpB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MAC1D,CAAC,MAAK;QACHuB,eAAe,EAAE;MACpB;IACA,CAAC,CAAC,CACDH,KAAK,CAAEC,GAAG,IAAK;MACdtB,OAAO,CAACC,GAAG,CAACqB,GAAG,CAAC;IAClB,CAAC,CAAC;IAEJf,cAAc,EAAE;EAElB,CAAC,EAAE,EAAE,CAAC;AAGR,CAAC;AAAC,GAjFIV,IAAI;AAAA,KAAJA,IAAI;AAmFV,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module"}