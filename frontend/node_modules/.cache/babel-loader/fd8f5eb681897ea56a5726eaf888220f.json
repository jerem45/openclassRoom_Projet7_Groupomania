{"ast":null,"code":"var _jsxFileName = \"/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/home/Like.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHeartBroken } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Like(props) {\n  _s();\n  //recuperation de la props detail des post avec la data \n  const getRequestHome = props.getRequestHome;\n  // state like dislike\n  const [userLike, setUserLike] = useState([{\n    like: 0,\n    likeActive: false\n  }]);\n  const [userDislike, setUserDislike] = useState([{\n    dislike: 0,\n    dislikeActive: false\n  }]);\n  function isLiked() {\n    const newLike = [...userLike];\n    newLike[0].likeActive = !userLike[0].likeActive;\n    newLike[0].like = userLike[0].likeActive ? userLike[0].like + 1 : userLike[0].like - 1;\n    setUserLike(newLike);\n  }\n  function isDisliked() {\n    const newUserDislike = [...userDislike];\n    newUserDislike[0].dislikeActive = !userDislike[0].dislikeActive;\n    newUserDislike[0].dislike = userDislike[0].dislike ? userDislike[0].dislike - 1 : userDislike[0].dislike + 1;\n    setUserDislike(newUserDislike);\n  }\n\n  //  gestion des states likes et dislikes\n  const handleLiked = e => {\n    if (userDislike[0].dislikeActive) {\n      isLiked();\n      isDisliked();\n    }\n    isLiked();\n    sendLike();\n  };\n  const handleDisLiked = e => {\n    if (userLike[0].likeActive) {\n      isLiked();\n      isDisliked();\n    }\n    isDisliked();\n    sendDislike();\n  };\n  //axios----------------update des like&dislike\n  const sendLike = event => {\n    axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/${props.objetctId}/like`,\n      headers: {\n        Authorization: `Bearer ${props.token}`\n      },\n      data: {\n        likes: userLike[0].like,\n        userId: props.userData\n      }\n    }).then(res => {\n      if (res.status === 201) {\n        console.log(userLike[0].like);\n        console.log(userDislike[0].dislike);\n        getRequestHome();\n      } else {\n        console.log(\"erreur lors de l'envoi du formulaire redirection impossible\");\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const sendDislike = event => {\n    axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/${props.objetctId}/dislike`,\n      headers: {\n        Authorization: `Bearer ${props.token}`\n      },\n      data: {\n        dislikes: 1,\n        userId: props.userData\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        getRequestHome();\n      } else {\n        console.log(\"erreur lors de l'envoi du formulaire redirection impossible\");\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-liked-color me-3 text-danger\",\n      onClick: () => handleLiked(),\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faHeart,\n        className: \"me-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), props.liked]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-liked-color\",\n      onClick: () => handleDisLiked(),\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faHeartBroken,\n        className: \"me-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), props.disliked]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 1\n  }, this);\n}\n_s(Like, \"XP1AKcaTFkpEYEwuF5QDdGTw/MY=\");\n_c = Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["React","useEffect","useState","FontAwesomeIcon","faHeart","faHeartBroken","axios","Like","props","getRequestHome","userLike","setUserLike","like","likeActive","userDislike","setUserDislike","dislike","dislikeActive","isLiked","newLike","isDisliked","newUserDislike","handleLiked","e","sendLike","handleDisLiked","sendDislike","event","method","url","process","env","REACT_APP_URL","objetctId","headers","Authorization","token","data","likes","userId","userData","then","res","status","console","log","catch","err","dislikes","liked","disliked"],"sources":["/home/xeannort/Documents/GitHub/openclassRoom_Projet7_Groupomania/frontend/src/comp/home/Like.js"],"sourcesContent":["import React,{useEffect, useState} from 'react'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {  faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport {  faHeartBroken } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from 'axios';\nexport default function Like(props) {\n//recuperation de la props detail des post avec la data \nconst getRequestHome = props.getRequestHome\n      // state like dislike\nconst [userLike,setUserLike] =useState([{\nlike:0,\nlikeActive:false,\n}])\nconst [userDislike,setUserDislike] =useState([{\n  dislike:0,\n  dislikeActive:false,\n  }])\n\nfunction isLiked (){\nconst newLike = [...userLike]\nnewLike[0].likeActive = !userLike[0].likeActive\nnewLike[0].like = userLike[0].likeActive ? userLike[0].like +1 : userLike[0].like -1\nsetUserLike(newLike)\n}\nfunction isDisliked (){\n  const newUserDislike = [...userDislike]\n  newUserDislike[0].dislikeActive = !userDislike[0].dislikeActive\n  newUserDislike[0].dislike = userDislike[0].dislike ? userDislike[0].dislike -1 : userDislike[0].dislike +1\n  setUserDislike(newUserDislike)\n}\n\n    //  gestion des states likes et dislikes\nconst handleLiked = (e)=>{\n if(userDislike[0].dislikeActive){\n  isLiked()\n  isDisliked()\n }\n isLiked()\n  sendLike()\n}\n\nconst handleDisLiked = (e)=>{\n if(userLike[0].likeActive){\n  isLiked() \n  isDisliked()\n }\nisDisliked()\nsendDislike()\n}\n//axios----------------update des like&dislike\nconst sendLike =(event)=>{\n\n  axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/${props.objetctId}/like`,\n      headers: {\n        Authorization: `Bearer ${props.token}`,\n      },\n      data: {\n        likes: userLike[0].like,\n        userId : props.userData\n      },\n    })\n      .then((res) => {\n        if (res.status === 201) {\n          console.log(userLike[0].like);\n          console.log(userDislike[0].dislike);\n          getRequestHome()\n  \n          } else {\n            console.log(\n              \"erreur lors de l'envoi du formulaire redirection impossible\"\n            );\n          }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n}\nconst sendDislike =(event)=>{\n\n  axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_URL}api/post/${props.objetctId}/dislike`,\n      headers: {\n        Authorization: `Bearer ${props.token}`,\n      },\n      data: {\n        dislikes: 1,\n        userId : props.userData\n      },\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          getRequestHome()\n  \n          } else {\n            console.log(\n              \"erreur lors de l'envoi du formulaire redirection impossible\"\n            );\n          }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n}\n  return (\n<div className='d-flex justify-content-center'>\n    <button \n    className='btn-liked-color me-3 text-danger'\n    onClick={()=>handleLiked()}>\n        <FontAwesomeIcon icon={faHeart} \n         className=\"me-1\" />{props.liked} \n    </button>\n    <button \n    className='btn-liked-color'\n    onClick={()=>handleDisLiked()}>\n\n        <FontAwesomeIcon icon={faHeartBroken} \n         className=\"me-1\" />{props.disliked}\n    </button>\n</div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}